.user_profile(data-bind="with: repository[M!M], css: {canBeEdit: repository[M!M].canBeEdit(), cannotBeEdit: !repository[M!M].canBeEdit(), edit_mode: repository[M!M].edit_mode()}")
	form.form-horizontal
		.control-group(data-bind="style: {display: canBeEdit() ||  firstName().length || lastName().length > 0 ? '' : 'none'}")
			label.control-label(for="inName") Name
			.controls
				input(type="text", id="inName", data-bind="attr: {size: firstName().length, disabled: !edit_mode()}, value: firstName, valueUpdate: 'afterkeydown'")
				input(type="text", id="inLastName", data-bind="attr: {disabled: !edit_mode()}, value: lastName, valueUpdate: 'afterkeydown'")
		.control-group
			label.control-label(for="inBirthdate") Birthday
			.controls
				.input-append.date#birthPick(data-date-format="dd.mm.yyyy", data-bind="attr: {'data-date': (new Date().getDate())+'.'+(new Date().getMonth()+1)+'.'+(new Date().getFullYear())}")
					input(type="text", id='inBirthdate', data-bind="attr: {disabled: !edit_mode()}, value: birthdate, valueUpdate: 'keyup'")
					span.add-on(data-bind="style: {display: (edit_mode() ? '' : 'none')}")
						i.icon-calendar
		.control-group
			label.control-label(for="inSex2") Sex
			.controls
				input(type="text", id="inSex2", disabled, data-bind="style: {display: (!canBeEdit() ? '' : 'none')}, value: sex()=='male' ? 'Male' : 'Female'")
				label.radio.inline(data-bind="style: {display: canBeEdit() ? '' : 'none'}")
					input(type="radio", id='inSex', name="sex", value="male", data-bind="checked: sex, attr: {disabled: !edit_mode()}")
					span(data-bind="style: {display: (edit_mode() || sex()=='male' ? '' : 'none')}") &nbsp;Male
				label.radio.inline(data-bind="style: {display: canBeEdit() ? '' : 'none'}")
					input(type="radio", id='inSex', name="sex", value="female", data-bind="checked: sex, attr: {disabled: !edit_mode()}")
					span(data-bind="style: {display: (edit_mode() || sex()=='female' ? '' : 'none')}") &nbsp;Female
		.control-group(data-bind="style: {display: canBeEdit() ||  country().length || city().length > 0 ? '' : 'none'}")
			label.control-label(for="inResidence") Residence
			.controls
				input(type="text", id='inResidence', data-bind="attr: {disabled: !edit_mode()}, size: country().length, value: country, valueUpdate: 'afterkeydown'")
				input(type="text", id="inResidence2", data-bind="attr: {disabled: !edit_mode()}, value: city, valueUpdate: 'afterkeydown'")
		.control-group(data-bind="style: {display: canBeEdit() ||  work().length > 0 ? '' : 'none'}")
			label.control-label(for="inInterested") Interested in
			.controls
				input(type="text", id='inInterested', data-bind="attr: {disabled: !edit_mode()}, value: work, valueUpdate: 'afterkeydown'")
		.control-group(data-bind="style: {display: canBeEdit() ||  www().length > 0 ? '' : 'none'}")
			label.control-label(for="inWebsite") Website
			.controls
				input(type="text", id='inWebsite', data-bind="attr: {disabled: !edit_mode()}, value: www, valueUpdate: 'afterkeydown'")
		.control-group(data-bind="style: {display: canBeEdit() ||  icq().length > 0 ? '' : 'none'}")
			label.control-label(for="inICQ") ICQ
			.controls
				input(type="text", id='inICQ', data-bind="attr: {disabled: !edit_mode()}, value: icq, valueUpdate: 'afterkeydown'")
		.control-group(data-bind="style: {display: canBeEdit() ||  skype().length > 0 ? '' : 'none'}")
			label.control-label(for="inSkype") Skype
			.controls
				input(type="text", id='inSkype', data-bind="attr: {disabled: !edit_mode()}, value: skype, valueUpdate: 'afterkeydown'")
		.control-group(data-bind="style: {display: canBeEdit() ||  aim().length > 0 ? '' : 'none'}")
			label.control-label(for="inaim") aim
			.controls
				input(type="text", id='inaim', data-bind="attr: {disabled: !edit_mode()}, value: aim, valueUpdate: 'afterkeydown'")
		.control-group(data-bind="style: {display: canBeEdit() ||  lj().length > 0 ? '' : 'none'}")
			label.control-label(for="inLJ") LJ
			.controls
				input(type="text", id='inLJ', data-bind="attr: {disabled: !edit_mode()}, value: lj, valueUpdate: 'afterkeydown'")
		.control-group(data-bind="style: {display: canBeEdit() ||  flickr().length > 0 ? '' : 'none'}")
			label.control-label(for="inflickr") flickr
			.controls
				input(type="text", id='inflickr', data-bind="attr: {disabled: !edit_mode()}, value: flickr, valueUpdate: 'afterkeydown'")
		.control-group(data-bind="style: {display: canBeEdit() ||  blogger().length > 0 ? '' : 'none'}")
			label.control-label(for="inBlogger") Blogger
			.controls
				input(type="text", id='inBlogger', data-bind="attr: {disabled: !edit_mode()}, value: blogger, valueUpdate: 'afterkeydown'")
		.control-group(data-bind="style: {display: canBeEdit() ||  aboutme().length > 0 ? '' : 'none'}")
			label.control-label(for="inaboutme") About Me
			.controls
				textarea(rows="4", id='inaboutme', data-bind="attr: {disabled: !edit_mode()}, value: aboutme, valueUpdate: 'afterkeydown'")
		.control-group(data-bind="style: {display: canBeEdit() ? '' : 'none'}")
			.controls
				button.btn-strict(type="button", data-bind="event: {click: function(data, event) { if (!data.edit_mode()){data.edit(true)} else{data.saveUser()}}}")
					i.icon-pencil.icon-white
					span(data-bind="text: edit_mode() ? 'Save profile' : 'Edit profile'")