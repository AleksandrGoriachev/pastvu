.comments(data-bind="with: repository[M!M]")
	.commentsBrief(data-bind="css: {commentsLoading: loadingComments()}, text: briefText")
	.row-fluid.pagTop(data-bind="style: {visibility: paginationShow() ? 'visible' : 'hidden'}")
		.pagination.pagination-small.pagination-centered(data-bind="template:{ name: 'pagerTpl'}")
	.row-fluid.comments(data-bind="foreach: comments")
		.row-fluid.comment
			a.photoPreviewA(data-bind="attr: {href: $parent.commentsPhotos[$data.photo].link}")
				img.photoPreview(data-bind="attr: {src: $parent.commentsPhotos[$data.photo].sfile}")
			.commentHead
				a.photoName(data-bind="attr: {href: $parent.commentsPhotos[$data.photo].link}, html: $parent.commentsPhotos[$data.photo].name")
				.dotDelimeter Â·
				a.commentStamp(data-bind="attr: {href: $data.link}, text: moment($data.stamp).calendar()")
			a.commentText(data-bind="attr: {href: $data.link}, html: $data.txt")
	.row-fluid.pagBottom(data-bind="style: {display: paginationShow() ? '' : 'none'}")
		.pagination.pagination-small.pagination-centered(data-bind="template:{ name: 'pagerTpl'}")
	script(id="pagerTpl", type="text/html")
		ul
			li(data-bind="css: {disabled: page() === 1}"): a(data-bind="attr: {href: '/u/' + u.login() + '/comments/'}") &laquo;&laquo;
			li(data-bind="css: {disabled: !pageHasPrev()}"): a(data-bind="attr: {href: '/u/' + u.login() + '/comments/' + (page() - 1)}") &laquo;
			//ko foreach: pages
			li(data-bind="css: {active: $data === $parent.page()}"): a(data-bind="attr: {href: '/u/' + $parent.u.login() + '/comments/' + $data}, text: $data")
			// /ko
			li(data-bind="css: {disabled: !pageHasNext()}"): a(data-bind="attr: {href: '/u/' + u.login() + '/comments/' + (page() + 1)}") &raquo;
			li(data-bind="css: {disabled: page() === pageLast()}"): a(data-bind="attr: {href: '/u/' + u.login() + '/comments/' + pageLast()}") &raquo;

