ИМПОРТ в Mongo json коллекции (например из myphpadmin)
	1. Вариант загрузки как массива объектов
	mongoimport -d pastvu -c old_photos --drop --type json --jsonArray --file import\photos.json

		\n ->> \\n или <br> если надо сохранить пробелы в html
		\t ->> (пробел)

	2. Вариант загрузки как строки объектов
	mongoimport -d pastvu -c photosold --drop --type json --jsonArray --file photos.json

		Удалить скобки массива
		\n ->> \\n или <br> если надо сохранить пробелы в html
		\t ->>  (пробел)
		}, { --> }\n{
		
		
ПЕРЕНОС ДАМПА Mongo
	1. Делаем полный дамп (bson)
		mongodump -db pastvu -o C:\Mongo\bin\dump
	2. Восстановление из дампа
		mongorestore --db pastvu C:\Mongo\bin\dump\pastvu
		
	Можно экспортировать все коллекции и потом импортировать по одной
	Batch срипт для экспорта всех коллекций (http://stackoverflow.com/questions/11255630/how-to-export-all-collection-in-mongodb)
		mongo "{YOUR SERVER}/{YOUR DATABASE}" --eval "rs.slaveOk();db.getCollectionNames()" --quiet>__collections.txt
		for /f %%a in ('type __collections.txt') do @set COLLECTIONS=%%a
		for %%a in (%COLLECTIONS%) do mongoexport --host {YOUR SERVER} --db {YOUR DATABASE} --collection %%a --out data\%%a.json
		del __collections.txt

ПОСЛЕДОВАТЕЛЬНОСТЬ КОНВЕРТАЦИИ
db.loadServerScripts()
oldConvertAll()
	Или последовательность:
	oldConvertUsers()
	oldConvertPhotos()
	oldConvertComments()
	oldConvertNews()
	oldConvertUsers('old_usersSpb', true)
	oldConvertPhotos('old_photosSpb', true)
	oldConvertComments('old_commentsSpb', true)
	calcUserStats()
	calcPhotoStats()

sudo node app.js --land prod --domain pastvu.com --port 80 --uport 3001
		
ПЕРЕНОС ФАЙЛОВ	
	CMD скрипт по flatten всех файлов во всех подпапках в одну результирующую папку:
	forfiles /s /m *.* /p \_test\pastvu\photosAll /c "cmd /c move @file \_test\pastvu\result"

	Cкрипт для переименовани файлов путем удаления части до подчеркивания
		С помощью Bash:
		for f in *_*.jpg; do mv "$f" "${f/*_/}"; done
		
		Через регулярное выражение: ^(?:[^_]+_)?(.+)   достать $1

		С помощью CMD. http://stackoverflow.com/questions/15135920/remove-file-name-prefix-with-cmd
		Создаем bat-file рекуивно итерирующийся по папкам и вызыващим для них следующий bat:
		@echo off
		call "%~dp0dashrem.bat"
		for /r /d %%x in (*) do (
			pushd "%%x"
			call "%~dp0dashrem.bat"
			popd
		)
		Создаем bat-file для переименования всех файлов в папке
		setlocal enabledelayedexpansion
		for %%F in (*.jpg) do (
		  set "FN=%%F"
		  if "!FN:~4,1!"=="_" (
			set "FN=!FN:~5!"
			ren "%%F" "!FN!"
		  )
		)


composite -dissolve 100% -gravity southwest -geometry +2+2 water2.png test2.jpg res2.jpg
convert res2.jpg -gravity southwest -font "Verdana" -pointsize 10 -fill rgba(255,255,255,0.75) -annotate +19+3 http://pastvu.com/u/Duche res3.jpg

D:\_PROJS\pastvu\app\misc>convert -size 260x14 xc:none -font C:\Windows\Fonts\AdobeFanHeitiStd-Bold.otf -pointsize 11 -gravity west -stroke rgba(0,0,0,0.35) -strokewidth 3 -fill #888 -annota
te 0 " www.pastvu.com  |  ArchitectorS  |  #101604" +repage -stroke none -fill #eaeaea     -annotate +0+0 " www.pastvu.com  |  ArchitectorS  |  #101604" test4.jpg +swap -gravity southwest -g
eometry +20+3 -composite -gravity southwest -geometry +3+3 water3.png -composite exmpl10.jpg

		
Пакетный конверт всех jpg в папке в webP
	setlocal enabledelayedexpansion
	for %%F in (D:\_PROJS\pastvu\publicContent\photos\micros\*.jpg) do (
	  C:\libwebp-0.2.1\cwebp -short %%F -o %%F.webp
	)