.mapModuleWrapper(data-bind="with: repository[M!M]")
	.mapContainer(data-bind="css: {embedded: embedded}")
		.map

		//ko if: embedded
		//ko if: editing()
		.mapInfo.info
			//ko if: point.geo()
			button.btn-strict.btn-strict-small(type="button", data-bind="click: delPointGeo")
				i.icon-remove-circle.icon-white
				span Обнулить кооринаты
			// /ko
			//ko ifnot: point.geo()
			i.icon-map-marker
			| Для установки координаты кликните по карте
			// /ko
		// /ko

		//ko if: !editing() && !point.geo()
		.mapInfo.warn
			i.icon-warning-sign
			| Координаты фотографии не указаны
		// /ko
		// /ko

		.mapYearSelector
			.yearSlider
				.ui-slider-handle.L
				.ui-slider-handle.R
			.yearOuter.L
			.yearOuter.R
		.mapNavigation.mContainer.mHidden
		label.checkbox.linkOpenMode
			input(type="checkbox", data-bind="checked: openNewTab")
			| Open links in new tab
		.layersPanel.fringe(data-bind="css: {open: layersOpen()}")
			.currentLayer(data-bind="text: layerActiveDesc(), click: toggleLayers")
			.layerSystems(data-bind="style: {width: (104 * (layersOpen() ? layers().length : 1)) + 'px'}")
				.h_separator
				//ko foreach: {data: $data.layers, as: 'system'}
				.layerSystem(data-bind="css: {selected: system.selected()}")
					.layerHead(data-bind="text: system.desc")
					//ko foreach: {data:system.types, as: 'type'}
					.layerType(data-bind="css: {selected: type.selected()}, text: type.desc, click: function () {$parents[1].selectLayer(system.id, type.id)}")
					// /ko
				// /ko
